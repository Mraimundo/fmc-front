image: node:12

definitions:
  services:
    docker:
      memory: 4096

pipelines:
  default:
    - step:
        size: 2x
        caches:
          - node
        script: 
          - yarn
          - yarn test
          - yarn build
        services:
          - docker